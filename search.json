[{"title":"储存目录清理脚本分享","url":"/2022/09/28/%E5%82%A8%E5%AD%98%E7%9B%AE%E5%BD%95%E6%B8%85%E7%90%86%E8%84%9A%E6%9C%AC/","content":"因为长时间饱受垃圾文件折磨，又不想过多耗电，于是我便乱写了“垃圾文件清理脚本”它具有以下功能：1.清理储存目录（保持干净整洁。2.白名单功能（脚本不会删除白名单内文件。3.日志记录。它的缺点:1.脚本内没有添加识别脚本自身、配置文件及日志功能，所以需在配置文件添加。\n声明：使用本脚本造成任何“财产损失”及“文件丢失”与“作者”无关。脚本及其配置文件只能放置在储存目录，不能放置在其他目录，否则你的储存目录内“&#x2F;storage&#x2F;emulated&#x2F;0&#x2F;”所有文件可能被删除。使用教程如下首先复制下面源码#!/bin/bash#作者 panxiao# 判断是否root执行if [ `id -u` -ne 0 ];then# 开始计时start_time=$(date +%s.%N)# 创建一个文件来储存白名单中的文件名touch whitelist.txt# 获取白名单列表的行数及所有文件数量white_lines=$(cat whitelist.txt | wc -l)all_files=$(ls -A /storage/emulated/0 | wc -l)# 设置删除计数和删除记录文件路径deleted=0log_path=&quot;/sdcard/deleted_files.log&quot;# 定义并发线程数thread_num=10# 在日志文件中写入当前时间和操作说明#echo &quot;$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;) - 删除非白名单文件&quot; &gt;&gt; $log_path# 遍历所有文件并删除非白名单文件for file_name in $(ls -a /storage/emulated/0); do  # 如果文件不在白名单中，则删除  if ! grep -q &quot;$file_name&quot; whitelist.txt; then    ((deleted++))# 在新线程中删除文件  &#123;    rm -rf &quot;/storage/emulated/0/$file_name&quot;    echo &quot;$deleted=&gt;删除$file_name&quot;    #echo &quot;$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;) - 删除文件：$file_name&quot; &gt;&gt; $log_path  &#125; &amp;  # 控制并发线程数量 #while [ $(jobs | wc -l) -ge $thread_num ]; do  #   sleep 1#   done  fidone# 等待所有线程结束wait# 停止计时end_time=$(date +%s.%N)elapsed=$(echo &quot;$end_time - $start_time&quot; | bc)# 格式化时间，确保输出3位数formatted_time=$(printf &quot;%.3f&quot; $elapsed)# 输出删除统计信息和完成提示echo &quot;删除完成！共删除了 $deleted 个文件用时$formatted_time秒（不包括白名单中的文件）&quot;echo &quot;详细记录请查看：$log_path&quot;# 如果为root执行则提示并退出脚本   else    i=0    while ((i&lt;=20)) do      ((i++))      echo &quot;禁止使用root运行-此操作可能使设备变砖!&quot;    donefi\n\n使用mt管理器在储存目录“&#x2F;storage&#x2F;emulated&#x2F;0&#x2F;”随便创建一个后缀为sh的文件粘贴复制的代码到创建的文件并保存执行该文件第一次执行该文件，它会生成“whitelist.txt”文件，然后必须添加重要文件的“文件名”一行一个不得有空格否则配置文件白名单失效，你的文件会被删除，注意添加脚本和白名单文件的文件名。\n配置文件配置完成之后，你就可以执行你创建的清理文件了。注意事项1.如果你有重要文件请不要使用此脚本2.请不要使用root执行脚本可能删除你的根目录文件3.可能存在未知bug，作者能力有限暂未发现4.使用本脚本造成任何财产损失及文件丢失作者无关","tags":["shell"]},{"title":"谷歌相机拍摄","url":"/2023/11/06/%E8%B0%B7%E6%AD%8C%E7%9B%B8%E6%9C%BA%E6%8B%8D%E6%91%84/","content":"路边树\n\n紫花\n\n树叶阳光\n\n橙红菊花","tags":["随拍"]},{"title":"使用Termux安装hexo博客框架并部署到Github","url":"/2022/09/22/%E4%BD%BF%E7%94%A8termux%E5%AE%89%E8%A3%85hexo%E5%B9%B6%E4%B8%8A%E4%BC%A0github/","content":"因为没电脑只有俩手机还没服务器，而自己又想再折腾客(原来的博客寄了，所以我便想到了hexo。查看了巨多教程之后，我发现这个东东竟然可以用手机安装并部署，在失败数次出现各种离谱报错之后，我总结了他人教程的经验，终于部署成功。成功后我便想把手机安装部署写成教程作为我这博客的第二篇文章，于是就有了下面的教程。\n安装过程↓一、准备工作下载termux建议使用Github仓库里面的最新版自己去(浏览器)百度搜termux去官网然后跳转GitHub仓库下载\n安装过程可能需要科学上网环境也可能不需要\n如遇[y&#x2F;n]选项请输入y回车\n二、安装Node.jspkg install nodejs-lts\n三、安装git与vim编辑器git\npkg install git\nvim编辑器\npkg install vim\n\n四、安装hexo并启动创建文件夹\nmkdir hexo\n进入文件夹\ncd hexo\n安装hexo\nnpm install hexo-cli -g\n生成文件\nhexo init\n生成静态网页文件\nhexo g\n启动hexo\nhexo s\n启动后会出现预览链接可复制到浏览器打开Ctrl加c 可以停止hexo预览\n部署过程↓一、安装openssh并生成密钥安装openssh“请不要在hexo文件内安装\n退出hexo文件\ncd -\npkg install openssh\n生成秘钥\nssh-keygen -t rsa -C &quot;随便输建议弄长些&quot;\n注意：秘钥生成后注意此路径“data&#x2F;data&#x2F;com.termux&#x2F;files&#x2F;home&#x2F;.ssh&#x2F;id_rsa.pub”后缀带有pub是公钥需粘贴到github，如果生成密钥之后跳出的地址不同请自觉替换\n使用vim编辑器打开id_rsa.pub文件并复制其内全部内容\nvim data/data/com.termux/files/home/.ssh/id_rsa.pub\n按esc 输入“:wq”退出编辑器\n如何将公钥复制到github1.打开github官网并登录2.点击左上角三条杠3.点击“Settings”4.点击“SSH and GPG keys”5.滑到下方找到“SSH keys”点击对面的绿色按钮“New SSH key”6.滑到最下方7.Title框随便输8.key框输入你复制的公钥“id_rsa.pub内容”9.点击绿色按钮“Add SSH key”保存\n复制到GitHub后可用以下命令查看是否可以连接到github\nssh git@github.com\n\n二、配置gitgit config --global user.name &quot;你的github用户名&quot;\ngit config --global user.email &quot;你的github邮箱&quot;\n弄完之后可通过以下面命令查看是否正确配置 \ngit config user.email\ngit config user.name\n\n三、创建仓库设置仓库名为 “你的github用户名.github.io设置仓库为公共即钩选 “public”选项设置添加自述文件即钩选 “Add a README file”最后划到最下方点击绿色按钮创建仓库\n四、使用vim编辑器编辑“_config.yml”文件打开_config.yml文件\nvim _config.yml\n滑倒最下方编辑最后一行“type: ‘’为\ntype: git\n并在type下方添加\nrepository: git@github.com:你的GitHub用户名/你的GitHub用户名.github.io  branch: main\n\n五、部署到GitHub打开hexo文件\ncd hexo\nhexo 文件下使用以下命令安装hexo-deployer-git \nnpm install hexo-deployer-git --save\n清除一些不需要的文件 \nhexo clean\n生成静态网页文件\nhexo g\n部署命令\nhexo d\n备注：如何写文章：输入下方命令回车会跳出一个后缀为md的文件的路径\nhexo new &quot;文章标题&quot;\n使用vim打开这个文件(有root直接去mt或者其他的什么管理器)\nvim 上方命令执行后跳出的路径\n\n关闭termux后再次进入的方法打开hexo文件 \ncd hexo\n在这个文件下你就可以执行hexo的命令了\n如教程有问题请联系我酷安@panxiao","tags":["hexo","Termux"]}]